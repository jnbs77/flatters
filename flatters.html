<!doctype html>
<html>
<head>
  <title>flatters</title>
  <link rel="stylesheet" type="text/css" href="style.css"/>
  <!--script src= "http://ajax.googleapis.com/ajax/libs/angularjs/1.3.14/angular.min.js"></script-->


  <script src="angular.min.js"></script>

</head>
<body ng-app="app"> 

  <div ng-controller="terrainCtrl" style="width: 60%; text-align: center; margin: 0, auto;">

    <select ng-model="ordre">
    <option value="name">Tri par nom</option>
    <option value="desc">Tri par description ascendante</option>
    <option value="-desc">Tri par description descendante</option>
    </select>	
    Gold : {{gold}} | Gold-new : {{gold - sommeCouts(cmds)}}

    <table style="text-align:center" border="1" width="90%" cellspacing="0" aling="center">
      <tr class="terrains">
    	 <td width=5% class="ter-{{terrain.type}}" style="border:1px solid black" ng-repeat="terrain in terrains2 | orderBy: no">{{terrain.type}} <br/> {{terrain.civils}} - {{terrain.guerriers}}</td>
      </tr>
      <tr class="terrains">
       <td  width=5% class="ter-{{terrain.type}}" style="border:1px solid black; font-size: 100%" ng-repeat="terrain in terrains2 | orderBy: no">
        <select style="border=1;" ng-model="cmds[terrain.no-1 ].cmd">
          <option default value="NONE">Aucune</option>
          <option value="recruter">Recruter</option>
          <option value="construire">Construire</option>
          <option value="attaquer">Attaquer</option>
        </select> 
      </td>
    </tr>
    <tr class="terrains">
       <td width=5% class="ter-{{terrain.type}}" style="border:1px solid black" ng-repeat="terrain in terrains2 | orderBy: no"><input size="3" type="text" ng-model="cmds[terrain.no-1 ].cout"></td>
      </tr>
    <tr class="terrains">
      <td width=5% class="ter-{{terrain.type}}" style="border:1px solid black" ng-repeat="terrain in terrains2 | orderBy: no">cmd : {{cmds[terrain.no-1 ].cmd}}</td>
    </tr>


      
   </table>


 </div>

<script>

angular.module("app", []).controller("terrainCtrl", function($scope) {
  console.log($scope);
    $scope.gold = 1000;
    $scope.goldnew = 1000;


    $scope.terrains2 = [
    {no:1, type:'mer', civils:8, guerriers:2 }, 
    {no:2, type:'plaine', civils:10, guerriers:5 }, 
    {no:3, type:'plaine', civils:10, guerriers:5 }, 
    {no:4, type:'mer', civils:8, guerriers:2 }, 
    {no:5, type:'mer', civils:10, guerriers:5 }, 
    {no:6, type:'plaine', civils:8, guerriers:2 }, 
    {no:7, type:'plaine', civils:10, guerriers:5 }, 
    {no:8, type:'plaine', civils:8, guerriers:2 }, 
    {no:9, type:'foret', civils:8, guerriers:2 }, 
    {no:10, type:'foret', civils:0, guerriers:0 },
    {no:11, type:'plaine', civils:8, guerriers:2 }, 
    {no:12, type:'marais', civils:10, guerriers:5 }, 
    {no:13, type:'montagne', civils:10, guerriers:5 }, 
    {no:14, type:'montagne', civils:8, guerriers:2 }, 
    {no:15, type:'volcan', civils:10, guerriers:5 }, 
    {no:16, type:'montagne', civils:8, guerriers:2 }, 
    {no:17, type:'plaine', civils:10, guerriers:5 }, 
    {no:18, type:'plaine', civils:8, guerriers:2 }, 
    {no:19, type:'desert', civils:8, guerriers:2 }, 
    {no:20, type:'plaine', civils:8, guerriers:2 } 
    ];

    $scope.cmds = [
    {no:1, cmd:'NONE', cout:0}, 
    {no:2, cmd:'NONE', cout:0}, 
    {no:3, cmd:'NONE', cout:0}, 
    {no:4, cmd:'NONE', cout:0 }, 
    {no:5, cmd:'NONE', cout:0 }, 
    {no:6, cmd:'NONE', cout:0 }, 
    {no:7, cmd:'NONE', cout:0 }, 
    {no:8, cmd:'NONE', cout:0 }, 
    {no:9, cmd:'NONE', cout:0 }, 
    {no:10, cmd:'NONE', cout:0 },
    {no:11, cmd:'NONE', cout:0 }, 
    {no:12, cmd:'NONE', cout:0 }, 
    {no:13, cmd:'NONE', cout:0 }, 
    {no:14, cmd:'NONE', cout:0 }, 
    {no:15, cmd:'NONE', cout:0 }, 
    {no:16, cmd:'NONE', cout:0 }, 
    {no:17, cmd:'NONE', cout:0 }, 
    {no:18, cmd:'NONE', cout:0 }, 
    {no:19, cmd:'NONE', cout:0 }, 
    {no:20, cmd:'NONE', cout:0 } 
    ];

    $scope.sommeCouts = function (cmds){
      sommeCouts = 0;
      for (var iter = 0; iter < 20; iter++) {
        sommeCouts = sommeCouts + Number(cmds[iter].cout);
      }

      return sommeCouts;
    }


});


</script>


</body>



</html>
